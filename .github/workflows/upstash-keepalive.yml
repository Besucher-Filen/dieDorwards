name: upstash-keepalive

on:
  schedule:
    - cron: "7 4 * * *"   # täglich 04:07 UTC
  workflow_dispatch: {}    # manuell auslösbar

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping Upstash (LRANGE 0..0)
        run: |
          set -e
          curl -fsS \
            -H "Authorization: Bearer ${{ secrets.UPSTASH_REDIS_REST_TOKEN }}" \
            "${{ secrets.UPSTASH_REDIS_REST_URL }}/lrange/audit:logins/0/0" >/dev/null
          echo "OK: Upstash ping gesendet."
